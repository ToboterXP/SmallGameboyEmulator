/*
 * i80_9f.h
 *
 *  Created on: 14.10.2019
 *      Author: Tobias
 */

#ifndef I80_9F_H_
#define I80_9F_H_


#include <cstdint>
#include "Processor.h"

namespace proc {

int execute80_9f(uint8_t opcode, Processor * proc) {
	switch (opcode) {
	case 0x80:
		proc->setFlag(SUB_FLAG,0);
		uint8_t prev = proc->a;
		proc->a +=proc->b;
		proc->setFlag(CARRY_FLAG,prev>proc->a);
		proc->setFlag(HALF_CARRY_FLAG,(prev&0xf+ proc->b&0xf)&0x10==0x10);
		return 1;
	case 0x81:
		proc->setFlag(SUB_FLAG,0);
		uint8_t prev = proc->a;
		proc->a +=proc->c;
		proc->setFlag(CARRY_FLAG,prev>proc->a);
		proc->setFlag(HALF_CARRY_FLAG,(prev&0xf+ proc->c&0xf)&0x10==0x10);
		return 1;
	case 0x82:
		proc->setFlag(SUB_FLAG,0);
		uint8_t prev = proc->a;
		proc->a +=proc->d;
		proc->setFlag(CARRY_FLAG,prev>proc->a);
		proc->setFlag(HALF_CARRY_FLAG,(prev&0xf+ proc->d&0xf)&0x10==0x10);
		return 1;
	}
}
}


#endif /* I80_9F_H_ */
